#!/bin/bash

submenu_tailscale() {
  while true; do
    clear
    echo "===== ğŸ“¡ Tailscale ç®¡ç† ====="
    echo " 1. æ£€æŸ¥æ›´æ–°"
    echo " 2. ç™»å½•çŠ¶æ€"
    echo " 3. æŸ¥çœ‹ç½‘ç»œ (ifconfig)"
    echo " 4. æŸ¥çœ‹å…¬ç½‘æ˜ å°„ (Funnel)"
    echo " 5. tailscale çŠ¶æ€"
    echo " 99. å¸è½½"
    echo " 0. è¿”å›"
    echo ""
    read -p "è¯·é€‰æ‹©æ“ä½œç¼–å·: " choice
    case "$choice" in
      1) docker exec -it tailscale tailscale version; read -p "æŒ‰å›è½¦ç»§ç»­..." ;;
      2) docker exec -it tailscale tailscale status; read -p "æŒ‰å›è½¦ç»§ç»­..." ;;
      3) ifconfig; read -p "æŒ‰å›è½¦ç»§ç»­..." ;;
      4) docker exec -it tailscale tailscale funnel list; read -p "æŒ‰å›è½¦ç»§ç»­..." ;;
      5) docker exec -it tailscale tailscale status; read -p "æŒ‰å›è½¦ç»§ç»­..." ;;
      99)
        read -p "âš ï¸ ç¡®è®¤è¦å¸è½½ tailscale å—ï¼Ÿ(y/n): " confirm
        if [[ "$confirm" == "y" ]]; then
          docker rm -f tailscale && rm -rf ~/tailscale-docker
          echo "âœ… å·²å¸è½½ tailscale"
        else
          echo "â å·²å–æ¶ˆ"
        fi
        read -p "æŒ‰å›è½¦ç»§ç»­..."
        ;;
      0) break ;;
      *) echo "âŒ æ— æ•ˆé€‰é¡¹"; read ;;
    esac
  done
}
